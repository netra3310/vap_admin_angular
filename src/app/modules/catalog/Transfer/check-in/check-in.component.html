<!--begin::Layout-->
<div class="d-flex flex-column flex-lg-row mt-15">
    <!--begin::Content-->
    <div class="flex-lg-row-fluid me-lg-15 order-2 order-lg-1 mb-10 mb-lg-0">
        <!--begin::Card-->
        <div class="card card-flush pt-3 mb-5 mb-xl-10">
            <!--begin::Card body-->
            <div class="card card-flush py-4">
                <div class="card-body pt-0">
                    <div class="d-flex flex-column gap-10">
                        <div class="row g-5 g-xl-10 mb-5 mb-xl-10">
                            <ng-container *ngIf="IsTrackable">
                                <!-- <app-genric-table
                                    [data]="AllTrackbleStockDetailsItemList"
                                    [totalRecords]="totalRecords"
                                    [columnsData]="columns"
                                    [rowsPerPageOptions]=" [10, 20, 50, 100]"
                                    [loadingData]="IsSpinner"
                                    [enableGFilter]="false"
                                    [enablePrint]="false"
                                    [row]='10'>
                                </app-genric-table> -->
                                <app-custom-spinner [isLoading]="IsSpinner"></app-custom-spinner>
                                <div class="table-responsive border-bottom mb-9 min-h-500px">
                                    <table class="table align-middle table-row-dashed fs-6 gy-5 mb-0">
                                        <thead>
                                            <tr class="border-bottom fs-6 fw-bold text-muted">
                                                <th></th>
                                                <th class="min-w-70px text-end pb-2">{{'TrackableCode' | translate}} </th>
                                            </tr>
                                        </thead>
                                        <tbody class="fw-semibold text-gray-600">
                                            <ng-container *ngFor="let Trackable of AllTrackbleReturnDetailsItemList">
                                                <!--begin::Trackables-->
                                                <tr>
                                                    <!--begin::checkbox-->
                                                    <td>
                                                        <input 
                                                            class="form-check-input" 
                                                            type="checkbox" 
                                                            [(ngModel)]="Trackable.productChecked"
                                                            (onChange)="TrackableCheckboxChange(Trackable,$event)"
                                                        />
                                                    </td>
                                                    <!--end::checkbox-->
                                                    <!--begin::TrackableCode-->
                                                    <td class="text-end">{{Trackable.TrackableCode}}</td>
                                                    <!--end::TrackableCode-->
                                                </tr>
                                                <!--end::Trackables-->
                                            </ng-container>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-container>
                            <ng-container *ngIf="!IsTrackable">
                                <!-- <app-genric-table
                                    [data]="AllNonTrackbleStockDetailsItemList"
                                    [totalRecords]="totalRecords"
                                    [columnsData]="columns"
                                    [rowsPerPageOptions]=" [10, 20, 50, 100]"
                                    [loadingData]="IsSpinner"
                                    [enableGFilter]="false"
                                    [enablePrint]="false"
                                    [row]='10'>
                                </app-genric-table> -->
                                <app-custom-spinner [isLoading]="IsSpinner"></app-custom-spinner>
                                <div class="card card-flush py-4">
                                    <div class="card-body p-0">
                                        <div class="d-flex flex-column gap-10">
                                            <div class="row g-5 g-xl-10 mb-5 mb-xl-10">
                                                <app-ss-generic-table [data]="AllNonTrackbleReturnDetailsItemList" [columnsData]="columns"
                                                    [rowsPerPageOptions]="rowsPerPageOptions" [row]='rows' [filterGlobal]="filterGlobal" [globalFilterFields]="globalFilterFields"
                                                    [initialColumns]="initialColumns" [isLoading]="IsSpinner" [min_height]="'low'" [totalRecords]="totalRecords">
                                                </app-ss-generic-table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
            <!--end::Card body-->
        </div>
        <!--end::Card-->
    </div>
    <!--end::Content-->
    <!--begin::Sidebar-->
    <div class="flex-column flex-lg-row-auto w-lg-350px w-xl-400px mb-10 order-1 order-lg-2">
        <!--begin::Card-->
        <div class="card card-flush mb-0" data-kt-sticky="true" 
            data-kt-sticky-name="subscription-summary" 
            data-kt-sticky-offset="{default: false, lg: '200px'}" 
            data-kt-sticky-width="{lg: '350px', xl: '400px'}" 
            data-kt-sticky-left="auto" data-kt-sticky-top="150px" 
            data-kt-sticky-animation="false" 
            data-kt-sticky-zindex="95">
            <!--begin::Card header-->
            <div class="card-header">
                <!--begin::Card title-->
                <div class="card-title">
                    <h2>Search Options</h2>
                </div>
                <!--end::Card title-->
            </div>
            <!--end::Card header-->
            <!--begin::Card body-->
            <div class="card-body pt-0 fs-6">
                <!--begin::Seperator-->
                <div class="separator separator-dashed mb-7"></div>
                <!--end::Seperator-->
                <!--begin::Section-->
                <div class="mb-10">
                    <!--begin::Title-->
                    <h5 class="mb-4"></h5>
                    <!--end::Title-->
                    <!--begin::Details-->
                    <div class="mb-0">
                        <div class="fw-semibold fs-6 text-muted mt-7">
                            <!--begin::Label-->
                            <label class="required form-label" translate="MANAGEDPRODUCT.PRODUCT"></label>
                            <!--end::Label-->
                            <!--begin::Select2-->
                            <app-custom-select class="fs-6"
                                [items]="filteredProduct" [virtualScroll]="true" 
                                [bindLabel]="'label'"
                                [(twBinding)]="selectedProduct" [searchFn]="dataFunc"
                                [placeholder]="'Select Product...'"
                                (twBindingChange)="BindProductStockDetail(($event))">
                                
                                <span (click)="OpenProductDialog()"
                                    [inlineSVG]="
                                        './assets/media/icons/duotune/general/gen004.svg'
                                    "
                                    class="ms-5 m-auto svg-icon svg-icon-1 me-1 svg-icon-primary"
                                ></span>
                            </app-custom-select>
                            
                            <!--end::Select2-->
                        </div>
                        <div class="fw-semibold fs-6 text-muted mt-7">
                            <!--begin::Label-->
                            <label class="required form-label" translate="MANAGEDPRODUCT.PRODUCTASSIGNEDQUANTITY"></label>
                            <!--end::Label-->
                            <!--begin::Select2-->
                            <app-custom-input
                                [type]="'text'" 
                                [(twBinding)]="quantity"
                                [isDisabled]="IsTrackable? true : false"
                                [classGroup]="'form-control form-control-white form-control-sm ps-3'"
                            ></app-custom-input>
                            <!--end::Select2-->
                        </div>
                    </div>
                    <!--end::Details-->
                </div>
                <!--end::Section-->
                <!--begin::Seperator-->
                <div class="separator separator-dashed mb-7"></div>
                <!--end::Seperator-->
                <!--begin::Section-->
                <div class="mb-10">
                    <!--begin::Title-->
                    <h5 class="mb-4">Outlet Details</h5>
                    <!--end::Title-->
                    <!--begin::Details-->
                    <table class="table fs-6 fw-semibold gs-0 gy-2 gx-2">
                        <!--begin::Row-->
                        <tr class="">
                            <td class="text-gray-400" translate="MANAGEDPRODUCT.OUTLET"></td>
                            <td class="text-gray-800">
                                <span class=" badge badge-light-success">
                                    {{outlet || 0}}
                                </span>
                            </td>
                        </tr>
                        <!--end::Row-->
                        <!--begin::Row-->
                        <tr class="">
                            <td class="text-gray-400" translate="MANAGEDPRODUCT.OUTLETSTOCK"></td>
                            <td class="text-gray-800">
                                <span class=" badge badge-light-success">
                                    {{outletStock || 0}}
                                </span>
                            </td>
                        </tr>
                        <!--end::Row-->
                    </table>
                    <!--end::Details-->
                </div>
                <!--end::Section-->
                <div>
                    <a class="btn btn-sm fw-bold btn-primary ms-2" (click)="SaveTrackable()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-plus-fill me-2" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5zm6.5-11a.5.5 0 0 0-1 0V6H6a.5.5 0 0 0 0 1h1.5v1.5a.5.5 0 0 0 1 0V7H10a.5.5 0 0 0 0-1H8.5V4.5z"/>
                        </svg>
                        <span title="Close" translate="MANAGEDPRODUCT.SAVE"></span>
                    </a> 
                </div>
            </div>
            <!--end::Card body-->
        </div>
        <!--end::Card-->
    </div>
    <!--end::Sidebar-->
</div>
<!--end::Layout-->

<button type="button" hidden class="btn btn-primary" #btn_open_modal_products data-bs-toggle="modal" data-bs-target="#modalProducts">
    Open products modal
</button>

<jw-modal [modalId]="'modalProducts'" [modalTitle]="'Products'" [modalSize]="'xl'">
    <div class="card card-flush py-4">
        <div class="card-body p-0">
            <div class="d-flex flex-column gap-10">
                <div class="row g-5 g-xl-10 mb-5 mb-xl-10">
                    <app-genric-table (emitRowClick)="selectValue($event)" [menuItems]="[]" [data]="ProductData"
                        [columnsData]="productsColumn" (emitCheckbox)="TrackableCheckboxChange(false,$event)"
                        [loadingData]="isLoadingProducts">
                    </app-genric-table>
                </div>
            </div>
        </div>
    </div>
</jw-modal>